@model Sfa.Tl.ResultsAndCertification.Web.ViewModel.Result.Manual.ResultDetailsViewModel
@using Sfa.Tl.ResultsAndCertification.Web.Content.Result
@using Sfa.Tl.ResultsAndCertification.Common.Enum
@using Sfa.Tl.ResultsAndCertification.Web.WebConfigurationHelper
@inject IWebConfigurationService ConfigurationService

@{
    ViewData["Title"] = @ResultDetails.Page_Title;
}

@section NavigationBar {
    <vc:breadcrumb model=@Model.Breadcrumb></vc:breadcrumb>
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">

        <h1 class="govuk-heading-l">@string.Format(@ResultDetails.Heading_Learners_Results, Model.LearnerName)</h1>
        <dl class="govuk-summary-list govuk-!-margin-bottom-9 govuk-summary-list--no-border" aria-label="Learners details">
            <vc:summary-item model=Model.SummaryUln></vc:summary-item>
            <vc:summary-item model=Model.SummaryDateofBirth></vc:summary-item>
            <vc:summary-item model=Model.SummaryProviderName></vc:summary-item>
            <vc:summary-item model=Model.SummaryProviderUkprn></vc:summary-item>
            <vc:summary-item model=Model.SummaryTlevelTitle></vc:summary-item>
        </dl>

        <!-- #region Core -->
        <table class="govuk-table govuk-!-margin-top-9 responsive-table" role="table">
            <caption class="govuk-table__caption govuk-table__caption--m">
                @string.Format(ResultDetails.Heading_Core, Model.CoreComponentDisplayName)
            </caption>

            @if (Model.IsCoreAssessmentEntryRegistered)
            {
                <partial name="Partials/_examTableHeader.cshtml" />
                <tbody>
                    @foreach (var exam in Model.CoreComponentExams)
                    {
                        <partial name="Partials/_examTableResults.cshtml" model="exam" />
                    }
                </tbody>
            }
        </table>
        @if (!Model.IsCoreAssessmentEntryRegistered)
        {
            <p class="govuk-body govuk-!-margin-top-5">@ResultDetails.Para_No_Core_Assessments</p>
            <p class="govuk-body"><a href="#" class="govuk-link">@ResultDetails.Link_Add_Assessment</a></p>
        }
        <!-- #endregion -->


        <!-- #region Specialism -->
        @if(!Model.SpecialismComponents.Any())
        {
            <h2 class="govuk-heading-m govuk-!-margin-top-7">@string.Format(ResultDetails.Heading_Specialism, ResultDetails.Heading_Not_Specified)</h2>
            <p class="govuk-body">@ResultDetails.Para_No_Specialisms_Registered</p>
        }
        @foreach(var specialism in Model.SpecialismComponents)
        {
            <table class="govuk-table govuk-!-margin-top-9 responsive-table" role="table">
                <caption class="govuk-table__caption govuk-table__caption--m">
                    @string.Format(ResultDetails.Heading_Specialism, specialism.SpecialismComponentDisplayName)
                </caption>

                @if (specialism.IsSpecialismAssessmentEntryRegistered)
                {
                    <partial name="Partials/_examTableHeader.cshtml" />
                    <tbody>
                        @foreach (var exam in specialism.SpecialismComponentExams)
                        {
                            <partial name="Partials/_examTableResults.cshtml" model="exam" />
                        }
                    </tbody>
                }
            </table>

            @if (!specialism.IsSpecialismAssessmentEntryRegistered)
            {
                <p class="govuk-body govuk-!-margin-top-5">@ResultDetails.Para_No_Specialism_Assessments</p>
                <p class="govuk-body"><a href="#" class="govuk-link">@ResultDetails.Link_Add_Assessment</a></p>
            }
        }

        <!-- #endregion -->

        <details class="govuk-details govuk-!-margin-top-5" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">@ResultDetails.Details_Summary_Text_Link_More_About</span>
            </summary>
            <div class="govuk-details__text">
                @ResultDetails.Details_Summary_Text_Result_Overall_Results_Calculated_When_Final<br><br>
                @ResultDetails.Details_Summary_Text_Result_Pending_Result_Cannot_Be_Changed<br><br>
                @ResultDetails.Details_Summary_Text_Result_Final_Result_No_Longer_Changed_Here
                <a href="mailto: @ConfigurationService.GetTechnicalSupportEmailAddress()?subject=@ResultDetails.Email_Subject" class="govuk-link">@ResultDetails.Contactus_Link</a>@ResultDetails.Fullstop
                </div>
        </details>

        <a id="buttonSearchAgain" class="govuk-button govuk-!-margin-top-7" role="button" asp-route="SearchResults">@ResultDetails.Button_Search_Again</a>
    </div>

</div>
